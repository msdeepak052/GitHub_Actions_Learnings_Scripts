# Workflow Triggers and Repository Events Explained with Examples

Workflow triggers are events that initiate automated processes (workflows) in software development and DevOps pipelines. Repository events are specific types of triggers that occur within a version control repository. Let me explain with practical examples.

[REFERENCE](https://docs.github.com/en/actions/reference/events-that-trigger-workflows)

## 1. Common Workflow Triggers

### Example 1: Push to a Branch (GitHub Actions)

```yaml
# .github/workflows/build-on-push.yml
name: Build and Test on Push

on:
  push:
    branches:
      - main      # Trigger when code is pushed to main branch
      - feature/* # Trigger when code is pushed to any branch starting with "feature/"

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          
      - name: Install dependencies
        run: npm ci
          
      - name: Run tests
        run: npm test
```

![image](https://github.com/user-attachments/assets/03f1880f-b9ee-422c-8072-bd3075bca338)


**Real-life scenario**: Whenever developers push code to the main branch or any feature branch, this workflow automatically runs tests to ensure no breaking changes were introduced.

### Example 2: Pull Request Events

```yaml
# .github/workflows/pr-checks.yml
name: PR Quality Checks

on:
  pull_request:
    types: [opened, synchronize, reopened]
    branches: [main]

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm ci
      - run: npm run lint
        
  security:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Check for vulnerabilities
        uses: actions/npm-audit@v1
        with:
          command: audit
          args: --audit-level=moderate
```

**Real-life scenario**: When a developer opens a new pull request or updates an existing one targeting the main branch, this workflow runs code linting and security checks to maintain code quality.

## 2. Repository Events

### Example 3: Issue Comment Trigger

```yaml
# .github/workflows/issue-comment.yml
name: Respond to Issue Comments

on:
  issue_comment:
    types: [created]

jobs:
  respond:
    runs-on: ubuntu-latest
    steps:
      - name: Check if comment contains "/deploy"
        if: contains(github.event.comment.body, '/deploy')
        run: |
          echo "Deployment requested by @${{ github.event.comment.user.login }}"
          # Add your deployment logic here
          echo "Deployment started!"
```
Here's a **step-by-step guide** to implement the **GitHub Actions workflow triggered by `/deploy` comment** on an issue or pull request:

---

## ✅ **Step 1: Create the Workflow File**

1. Go to your repository.
2. Navigate to: `.github/workflows/`
3. Create a new file: `issue-comment.yml`

### Paste the following content:

```yaml
# .github/workflows/issue-comment.yml
name: Respond to Issue Comments

on:
  issue_comment:
    types: [created]

jobs:
  respond:
    runs-on: ubuntu-latest
    steps:
      - name: Check if comment contains "/deploy"
        if: contains(github.event.comment.body, '/deploy')
        run: |
          echo "Deployment requested by @${{ github.event.comment.user.login }}"
          # Simulate deployment
          echo "Deployment started!"
```

---

## ✅ **Step 2: Commit and Push the File**

* Commit the file:

  ```bash
  git add .github/workflows/issue-comment.yml
  git commit -m "Add workflow to respond to /deploy comments"
  git push
  ```

---

## ✅ **Step 3: Create an Issue or PR**

* Go to the repository on GitHub.
* Create a new **issue** or **pull request**.

---

## ✅ **Step 4: Add a Comment with `/deploy`**

* In the issue or PR, comment:

  ```
  /deploy
  ```

This triggers the workflow.

---

## ✅ **Step 5: Check Workflow Runs**

* Go to the **Actions** tab in your repository.
* Look for the workflow named `Respond to Issue Comments`.
* Click the latest run and see the logs.

---

## ✅ **(Optional) Step 6: Add Real Deployment Logic**

Replace:

```bash
echo "Deployment started!"
```

With actual deployment commands, such as:

```bash
./deploy.sh
```

or call a script, send a webhook, or trigger an external service.

---

## ✅ **Step 7: Restrict to Specific Users (Optional)**

You can allow only certain users to trigger deployment, for example:

```yaml
if: contains(github.event.comment.body, '/deploy') && github.event.comment.user.login == 'deepak'
```

---

---
**Real-life scenario**: When a team member comments "/deploy" on an issue, this workflow can trigger a deployment process, useful for staging environments.

### Example 4: Scheduled Events (Cron Jobs)

```yaml
# .github/workflows/nightly-build.yml
name: Nightly Build and Test

on:
  schedule:
    - cron: '0 3 * * *' # 3 AM UTC every day
  workflow_dispatch: # Allow manual triggering

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm ci
      - run: npm run build
      - run: npm run test:all
      - name: Upload test results
        uses: actions/upload-artifact@v3
        if: always()
        with:
          name: test-results
          path: test-results.xml
```

**Real-life scenario**: This workflow runs a comprehensive test suite every night at 3 AM UTC, ensuring that the codebase remains stable even if some tests are too slow to run on every commit.

### Example 5: Release Published Event

```yaml
# .github/workflows/release.yml
name: Process Release

on:
  release:
    types: [published]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Slack notification
        uses: slackapi/slack-github-action@v1
        with:
          slack-message: 'New release ${{ github.event.release.tag_name }} published!'
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK }}
          
  docker:
    runs-on: ubuntu-latest
    needs: notify
    steps:
      - uses: actions/checkout@v4
      - name: Build Docker image
        run: docker build -t myapp:${{ github.event.release.tag_name }} .
      - name: Log in to Docker Hub
        uses: docker/login-action@v2
        with:
          username: ${{ secrets.DOCKER_HUB_USERNAME }}
          password: ${{ secrets.DOCKER_HUB_TOKEN }}
      - name: Push to Docker Hub
        run: docker push myapp:${{ github.event.release.tag_name }}
```

**Real-life scenario**: When a new release is published in GitHub, this workflow notifies the team via Slack and automatically builds and pushes a Docker image tagged with the release version.

## 3. Advanced Example: Combined Events

```yaml
# .github/workflows/full-ci-cd.yml
name: Full CI/CD Pipeline

on:
  push:
    branches:
      - main
    paths:
      - 'src/**'       # Only trigger if changes are in src directory
      - 'package.json' # Or if package.json changes
  pull_request:
    branches:
      - main
  schedule:
    - cron: '0 5 * * 1' # Every Monday at 5 AM UTC

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm ci
      - run: npm test
      - uses: codecov/codecov-action@v3
        if: success()
        
  deploy:
    needs: test
    if: github.ref == 'refs/heads/main' && github.event_name == 'push'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm ci
      - run: npm run build
      - name: Deploy to AWS
        uses: aws-actions/configure-aws-credentials@v2
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: us-east-1
      - run: aws s3 sync ./dist s3://my-production-bucket --delete
```

**Real-life scenario**: This comprehensive workflow:
1. Runs tests on every push to main or pull request targeting main (but only if changes are in src/ or package.json)
2. Runs a weekly test on Mondays
3. Only deploys to production when code is pushed directly to main (not via PR)
4. Uploads test coverage to Codecov
5. Deploys built assets to AWS S3

These examples demonstrate how workflow triggers and repository events can automate various aspects of the software development lifecycle, from testing to deployment and notifications.
